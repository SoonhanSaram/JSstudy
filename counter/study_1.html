<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="counter.css">
</head>
<body>
    <h1>This is study 1</h1>
    <span id="number-display">0</span>
        <button id='plus-button'>더하기</button>
        <button id='minus-button'>빼기</button>
    <div id="starfield">
        
    </div>
</body>
<script>
    // #{id}, .{class}
    const addButton = document.querySelector('#plus-button');
    const minusButton = document.querySelector('#minus-button');
    const starfield = document.querySelector('#starfield');
    

    // 기존 구현 코드 
    // let number = 0
    // 
    // addButton.addEventListener('click', (e) => {
        // number += 1
        // document.querySelector('#number-display').textContent = number;
    // });
    // 
    // minusButton.addEventListener('click', (e) => {
        // number -= 1
        // document.querySelector('#number-display').textContent = number;
    // });

    // 새로운 구현 코드
    let starCount = 0;

    const createStar = () => {
        
        // starfield 의 기존 자식 노드를 삭제하고 새로운 div 노드를 생성하여 추가
        starfield.innerHTML = '';
        
        const stars = [];

        for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.classList.add('star');
        star.style.left = `${Math.random() * 15}vw`;
        starfield.appendChild(star);
        stars.push(star);

        setTimeout(() => {
            star.remove();
        }, 3000 * 1);
    }

    return stars;
    }

    const animateStars = () => {
        if(starCount > 0) {
            for (let i =0; i < starCount; i++) {
                const stars = createStar();
                stars.forEach(star => {
                    star.style.animation = `shootingStar 5s linear infinite`;
                });
            }
        }
    }

    addButton.addEventListener('click', () => {
        starCount++;
        animateStars();
        document.querySelector('#number-display').textContent = starCount;
     });
     
     minusButton.addEventListener('click', () => {
        if (starCount > 0) {
            starCount--;
            animateStars();   
            document.querySelector('#number-display').textContent = starCount; 
        }
     });
</script>
</html>